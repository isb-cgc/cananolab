{"version":3,"sources":["./src/app/cananolab-client/main-display/samples/publications/sample-publications/sample-publications.pipe.ts","./src/app/cananolab-client/main-display/samples/publications/sample-publications/sample-publications.module.ts","./src/app/cananolab-client/main-display/samples/publications/sample-publications/sample-publications-routing.module.ts","./src/app/cananolab-client/main-display/samples/publications/sample-publications/sample-publications.component.ts","./src/app/cananolab-client/main-display/samples/publications/sample-publications/sample-publications.component.html"],"names":[],"mappings":"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","file":"cananolab-client-main-display-samples-publications-sample-publications-sample-publications-module.js","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\nimport { Consts } from 'src/app/constants';\n@Pipe({\n  name: 'samplePublications'\n})\nexport class SamplePublicationsPipe implements PipeTransform {\n\n  transform(value: String, ...args: unknown[]): unknown {\n      let val = value;\n      val = val.replace('rest/publication/download',Consts.QUERY_PUBLICATION_DOWNLOAD)\n    return val;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SamplePublicationsComponent } from './sample-publications.component';\nimport { SamplePublicationsRoutingModule } from './sample-publications-routing.module';\nimport { SharedModule } from '../../../../common/modules/set-object-value/shared.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { SamplePublicationsPipe } from './sample-publications.pipe';\n@NgModule({\n    declarations: [SamplePublicationsComponent, SamplePublicationsPipe],\n    imports: [\n      CommonModule,\n      SamplePublicationsRoutingModule,\n      SharedModule,\n      FormsModule,\n      ReactiveFormsModule\n    ]\n  })\nexport class SamplePublicationsModule { }\n\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { SamplePublicationsComponent } from './sample-publications.component';\nconst routes: Routes = [{ path: '', component: SamplePublicationsComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SamplePublicationsRoutingModule { }\n","// --------------------------------------------------------------------------------------------\n// ------ This is the Publications screen which is called from  -------------------------------\n// ------ the top left \"Navigation Tree\" menu when a specific Sample has been selected. -------\n// ------ Not to be confused with \"Publications\" in the top horizontal menu.  -----------------\n// --------------------------------------------------------------------------------------------\n\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Properties } from '../../../../../../assets/properties';\nimport { Consts } from '../../../../../constants';\nimport { NavigationService } from '../../../../common/services/navigation.service';\nimport { Router } from '@angular/router';\nimport { ApiService } from '../../../../common/services/api.service';\nimport { StatusDisplayService } from 'src/app/cananolab-client/status-display/status-display.service';\n@Component( {\n    selector: 'canano-sample-publications',\n    templateUrl: './sample-publications.component.html',\n    styleUrls: ['./sample-publications.component.scss']\n} )\nexport class SamplePublicationsComponent implements OnInit{\n    sampleId = Properties.CURRENT_SAMPLE_ID;\n    helpUrl = Consts.HELP_URL_SAMPLE_PUBLICATIONS;\n    propertiesLoaded;\n    data;\n    publicationData;\n    toolHeadingNameManage;\n    editUrl=false;\n    sectionToShow='all';\n    constructor( private statusDisplayService:StatusDisplayService,private apiService:ApiService,private router:Router,private navigationService:NavigationService,private route: ActivatedRoute ){\n    }\n\n    ngOnInit(): void{\n        this.editUrl=this.statusDisplayService.isEditUrl();\n        this.publicationData={};\n        this.navigationService.setCurrentSelectedItem(3);\n        this.route.params.subscribe(\n            ( params: Params ) => {\n                this.sampleId=params['sampleId'];\n                this.apiService.getSampleName(this.sampleId).subscribe(\n                    data=>this.toolHeadingNameManage='Sample ' +data['sampleName'] + ' Publication'\n                )\n\n                if(\n                    this.sampleId <= 0 ){\n                    this.sampleId = Properties.CURRENT_SAMPLE_ID;\n                }else{\n                    Properties.CURRENT_SAMPLE_ID = this.sampleId;\n                };\n                let url = this.apiService.doGet(Consts.QUERY_PUBLICATION_SUMMARY_VIEW,'sampleId='+this.sampleId);\n                url.subscribe(data=> {\n                    console.log(data)\n                    this.data=data;\n                    this.propertiesLoaded=true;\n                    Properties.SAMPLE_TOOLS = true;\n                    this.separateDataSets(data);\n\n                },\n                error=>{\n\n                })\n            })\n\n\n    }\n\n    addPublication(type) {\n        this.router.navigate(['/home/samples/publications/publication',this.sampleId,type]);\n    }\n\n    editpublication(type,publicationId) {\n        console.log(publicationId)\n        this.router.navigate(['/home/samples/publications/publication',this.sampleId,publicationId,type]);\n    }\n\n\n    separateDataSets(data) {\n        let setupUrl=this.apiService.doGet(Consts.QUERY_PUBLICATION_SETUP,'');\n        setupUrl.subscribe(setupData=> {\n            let defaultCategories = setupData['publicationCategories'];\n            defaultCategories.forEach(item=> {\n                this.publicationData[item]=[];\n            });\n\n            let keys = Object.keys(data.category2Publications);\n            keys.forEach(category=> {\n                if (!this.publicationData[category]){\n                    this.publicationData[category]=[];\n                }\n\n                let currentArray=data.category2Publications[category];\n                if (currentArray.length) {\n                    currentArray.forEach(item=> {\n                        this.publicationData[category].push(item);\n                    })\n                }\n            })\n        })\n\n\n    }\n\n    splitKeywords(keywords) {\n        return keywords.split('\\n')\n    }\n\n    showSection(value) {\n        this.sectionToShow=value;\n    }\n}\n","<canano-main-display-heading\n    [helpUrl]=\"helpUrl\"\n    [toolHeadingName]=\"toolHeadingNameManage\" [export]=\"[sampleId,'PUBLICATION']\" [print]=\"true\"\n>\n</canano-main-display-heading>\n\n<div *ngIf=\"data\">\n    <ul class=\"nav nav-tabs\">\n        <li class=\"nav-item\">\n            <a class=\"nav-link active\" id=\"all-tab\" data-toggle=\"tab\" (click)=\"showSection('all')\">All</a>\n          </li>\n        <li *ngFor=\"let category of publicationData | keyvalue\" class=\"nav-item\">\n            <a class=\"nav-link\" id=\"category-tab\" data-toggle=\"tab\" (click)=\"showSection(category.key)\">{{category.key}}</a>\n        </li>\n    </ul>\n    <ng-container *ngFor=\"let publicationCategory of publicationData | keyvalue\">\n    <div class=\"mainSection\" *ngIf=\"publicationCategory.key==sectionToShow||sectionToShow=='all'\">\n        <div class=\"header\">\n            {{publicationCategory.key}} <button *ngIf=\"editUrl\" (click)=\"addPublication(publicationCategory.key)\" class=\"btn btn-primary btn-sm\">Add</button>\n        </div><br />\n        <ng-container *ngFor=\"let publication of publicationData[publicationCategory.key]; let publicationIndex=index;let last=last\">\n            <div class=\"mainBorder\" [ngClass]=\"{'last':last}\">\n                <div class=\"editButton\">\n                    <button (click)=\"editpublication(publicationCategory.key,publication.publicationId)\" class=\"btn btn-primary btn-sm\">Edit</button>\n                </div>\n                <table class=\"dataMain\">\n                    <tr>\n                        <td class=\"label\">\n                            Bibliography Info\n                        </td>\n                        <td [innerHTML]=\"publication.displayName|samplePublications\">\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"label\">\n                            Description\n                        </td>\n                        <td>\n                            <span [innerHtml]=\"publication.description\"></span>\n                        </td>\n                    </tr>\n                    <tr *ngIf=\"publication.keywordsStr!=''\">\n                        <td class=\"label\">\n                            Keywords\n                        </td>\n                        <td>\n                            <ul>\n                                <li *ngFor=\"let keyword of splitKeywords(publication.keywordsStr)\">\n                                    {{keyword}}\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"label\">\n                            Publication Status\n                        </td>\n                        <td>\n                            {{publication.status}}\n                        </td>\n                    </tr>\n                </table>\n            </div>\n\n        </ng-container>\n    </div>\n</ng-container>\n</div>\n"],"sourceRoot":"webpack:///"}